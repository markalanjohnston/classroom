<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loops & Patterns - VEX VR Python - W.I.N. Robotics</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../../../css/styles.css">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .main-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .lesson-card {
            background: white;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .breadcrumb-nav {
            background: rgba(255,255,255,0.1);
            padding: 10px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .breadcrumb-nav a {
            color: white;
            text-decoration: none;
            transition: opacity 0.3s;
        }

        .breadcrumb-nav a:hover {
            opacity: 0.8;
        }

        .section-title {
            color: #667eea;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .subsection-title {
            color: #333;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .info-box {
            background: #f0f7ff;
            border-left: 4px solid #2196f3;
            padding: 15px 20px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .warning-box {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 15px 20px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .tip-box {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px 20px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .python-accent-box {
            background: linear-gradient(135deg, #e8f4f8 0%, #f0f7ff 100%);
            border-left: 4px solid #3776ab;
            padding: 15px 20px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .code-block {
            background: #282c34;
            color: #abb2bf;
            border: 1px solid #3e4451;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            font-family: 'Courier New', Monaco, monospace;
            font-size: 0.95rem;
            overflow-x: auto;
            line-height: 1.6;
        }

        .code-block .keyword {
            color: #c678dd;
            font-weight: bold;
        }

        .code-block .function {
            color: #61afef;
        }

        .code-block .string {
            color: #98c379;
        }

        .code-block .comment {
            color: #5c6370;
            font-style: italic;
        }

        .code-block .number {
            color: #d19a66;
        }

        .comparison-box {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 25px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .comparison-side {
            padding: 15px;
            border-radius: 8px;
        }

        .blocks-side {
            background: #fff3e0;
            border: 2px solid #ff9800;
        }

        .python-side {
            background: #e8f4f8;
            border: 2px solid #3776ab;
        }

        .comparison-side h4 {
            margin-top: 0;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        @media (max-width: 768px) {
            .comparison-box {
                grid-template-columns: 1fr;
            }
        }

        .step-list {
            counter-reset: step-counter;
            list-style: none;
            padding-left: 0;
        }

        .step-list li {
            counter-increment: step-counter;
            margin-bottom: 15px;
            padding-left: 40px;
            position: relative;
        }

        .step-list li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .image-container {
            text-align: center;
            margin: 20px 0;
        }

        .image-container img {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .image-caption {
            color: #666;
            font-size: 0.9rem;
            margin-top: 10px;
            font-style: italic;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .action-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: transform 0.2s, box-shadow 0.2s;
            border: none;
            font-size: 1rem;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            color: white;
        }

        .action-button.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .action-button.disabled:hover {
            transform: none;
        }

        .secondary-button {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .secondary-button:hover {
            background: #f0f7ff;
            color: #667eea;
        }

        .learning-outcomes {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
        }

        .learning-outcomes h3 {
            color: #667eea;
            margin-top: 0;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .learning-outcomes ul {
            margin: 0;
            padding-left: 25px;
        }

        .learning-outcomes li {
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .progress-tracker {
            position: fixed;
            right: 20px;
            top: 100px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            width: 200px;
            z-index: 100;
        }

        @media (max-width: 1200px) {
            .progress-tracker {
                display: none;
            }
        }

        .progress-item {
            padding: 5px 0;
            color: #999;
            font-size: 0.9rem;
            cursor: pointer;
            transition: color 0.3s;
        }

        .progress-item.active {
            color: #667eea;
            font-weight: bold;
        }

        .progress-item.completed {
            color: #4caf50;
        }

        .quiz-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
        }

        .quiz-question {
            margin-bottom: 20px;
        }

        .quiz-options label {
            display: block;
            padding: 10px;
            margin: 5px 0;
            background: white;
            border: 2px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-options label:hover {
            border-color: #667eea;
            background: #f0f7ff;
        }

        .quiz-options input[type="radio"] {
            margin-right: 10px;
        }

        .quiz-feedback {
            padding: 10px;
            border-radius: 5px;
            margin-top: 15px;
            display: none;
        }

        .quiz-feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .quiz-feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .practice-example {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }

        .practice-example h4 {
            color: #667eea;
            margin-top: 0;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <nav class="breadcrumb-nav">
            <a href="../../../">
                <i class="bi bi-house"></i> Home
            </a>
            <span class="text-white-50 mx-2">/</span>
            <a href="../../">W.I.N. Robotics</a>
            <span class="text-white-50 mx-2">/</span>
            <a href="../">Programming Challenges</a>
            <span class="text-white-50 mx-2">/</span>
            <a href="./">Python Challenges</a>
            <span class="text-white-50 mx-2">/</span>
            <span class="text-white">Loops & Patterns</span>
        </nav>

        <div class="progress-tracker">
            <h6 class="mb-3">On This Page</h6>
            <div class="progress-item active" onclick="scrollToSection('intro')">Introduction</div>
            <div class="progress-item" onclick="scrollToSection('pen-tool')">The Pen Tool</div>
            <div class="progress-item" onclick="scrollToSection('drawing-square')">Drawing a Square</div>
            <div class="progress-item" onclick="scrollToSection('for-loops')">For Loops in Python</div>
            <div class="progress-item" onclick="scrollToSection('flow')">Flow of a For Loop</div>
            <div class="progress-item" onclick="scrollToSection('practice')">Practice Examples</div>
            <div class="progress-item" onclick="scrollToSection('challenge')">Draw a House Challenge</div>
            <div class="progress-item" onclick="scrollToSection('quiz')">Quiz</div>
        </div>

        <div class="lesson-card">
            <h1 class="display-4 mb-4">
                <i class="bi bi-arrow-repeat text-primary"></i>
                Loops & Patterns - VEX VR Python
            </h1>
            <p class="lead">
                Learn to use loops to repeat actions and create patterns! In this lesson, you'll discover how Python's for loops make your code more efficient, and use the Pen tool to draw complex shapes by repeating simple movements.
            </p>

            <div class="python-accent-box">
                <i class="bi bi-info-circle"></i>
                <strong>Why Loops Matter:</strong> Loops are one of the most powerful concepts in programming. Instead of writing the same code over and over, loops let you repeat actions efficiently. This lesson will teach you the Python for loop - a fundamental skill you'll use in every program you write!
            </div>

            <section id="intro">
                <div class="learning-outcomes">
                    <h3>
                        <i class="bi bi-journal-check"></i>
                        Learning Outcomes
                    </h3>
                    <p>By the end of this lesson, you will be able to:</p>
                    <ul>
                        <li>Use the Pen tool to draw shapes on the Art Canvas Playground</li>
                        <li>Understand how to use pen.move(), pen.set_pen_color(), and pen.set_pen_width() commands</li>
                        <li>Write for loops in Python using the correct syntax: <code>for i in range(n):</code></li>
                        <li>Understand how indentation defines code blocks inside loops</li>
                        <li>Describe how the range function determines the number of loop iterations</li>
                        <li>Apply loops to create complex patterns from simple repeated actions</li>
                    </ul>
                </div>

                <h2 class="section-title">
                    <i class="bi bi-lightbulb"></i> Why Loops Matter
                </h2>

                <p>
                    Imagine you need to draw a square. Without loops, you'd have to write the same commands four times - one for each side of the square. That's repetitive and inefficient! What if you wanted to draw a hexagon (6 sides) or an octagon (8 sides)? You'd be copying and pasting code all day.
                </p>

                <p>
                    <strong>Loops</strong> solve this problem by allowing you to repeat a set of commands multiple times. In this unit, you'll solve the Draw a House Challenge by learning how to use the Pen tool and for loops to draw different shapes efficiently.
                </p>

                <div class="tip-box">
                    <i class="bi bi-lightbulb"></i>
                    <strong>Real-World Example:</strong> Think about a factory assembly line. Instead of having a worker repeat the same action manually for each product, the assembly line automatically repeats the process. Loops work the same way in programming - they automate repetitive tasks!
                </div>
            </section>

            <section id="pen-tool">
                <h2 class="section-title">
                    <i class="bi bi-brush"></i> The Pen Tool
                </h2>

                <p>
                    The <strong>Pen tool</strong> on the VR Robot allows you to draw lines as the robot moves across the Art Canvas Playground. Think of it like holding a marker - when the pen is down, it draws as the robot moves; when it's up, the robot moves without drawing.
                </p>

                <h3 class="subsection-title">Pen Commands in Python</h3>

                <div class="info-box">
                    <strong>Key Pen Commands:</strong>
                    <ul class="mb-0 mt-2">
                        <li><code>pen.move(DOWN)</code> - Lowers the pen to start drawing</li>
                        <li><code>pen.move(UP)</code> - Raises the pen to stop drawing</li>
                        <li><code>pen.set_pen_color(color)</code> - Changes the pen color (BLACK, RED, GREEN, or BLUE)</li>
                        <li><code>pen.set_pen_width(width)</code> - Changes the pen line thickness</li>
                    </ul>
                </div>

                <h3 class="subsection-title">Using the Pen Tool</h3>
                <p>Here's how to use the pen commands in your code:</p>

                <div class="code-block">
<span class="comment"># Put the pen down to start drawing</span>
pen.<span class="function">move</span>(<span class="keyword">DOWN</span>)

<span class="comment"># Change the pen color to blue</span>
pen.<span class="function">set_pen_color</span>(<span class="keyword">BLUE</span>)

<span class="comment"># Draw a line by moving forward</span>
drivetrain.<span class="function">drive_for</span>(<span class="keyword">FORWARD</span>, <span class="number">200</span>, <span class="keyword">MM</span>)

<span class="comment"># Lift the pen to stop drawing</span>
pen.<span class="function">move</span>(<span class="keyword">UP</span>)

<span class="comment"># Move without drawing</span>
drivetrain.<span class="function">drive_for</span>(<span class="keyword">FORWARD</span>, <span class="number">100</span>, <span class="keyword">MM</span>)
                </div>

                <div class="warning-box">
                    <i class="bi bi-exclamation-triangle"></i>
                    <strong>Remember:</strong> The pen starts in the UP position by default. You must use <code>pen.move(DOWN)</code> before the robot will start drawing!
                </div>
            </section>

            <section id="drawing-square">
                <h2 class="section-title">
                    <i class="bi bi-square"></i> Drawing a Square (The Long Way)
                </h2>

                <p>
                    Let's start by drawing a square the long way - without loops. This will help you understand why loops are so useful!
                </p>

                <p>
                    A square has four equal sides and four 90-degree turns. To draw one, we need to repeat this pattern four times:
                </p>
                <ol>
                    <li>Drive forward (to draw one side)</li>
                    <li>Turn right 90 degrees (to face the direction for the next side)</li>
                </ol>

                <h3 class="subsection-title">Drawing a Square Without Loops</h3>

                <div class="code-block">
<span class="keyword">def</span> <span class="function">main</span>():
    <span class="comment"># Put the pen down</span>
    pen.<span class="function">move</span>(<span class="keyword">DOWN</span>)

    <span class="comment"># Side 1</span>
    drivetrain.<span class="function">drive_for</span>(<span class="keyword">FORWARD</span>, <span class="number">600</span>, <span class="keyword">MM</span>)
    drivetrain.<span class="function">turn_for</span>(<span class="keyword">RIGHT</span>, <span class="number">90</span>, <span class="keyword">DEGREES</span>)

    <span class="comment"># Side 2</span>
    drivetrain.<span class="function">drive_for</span>(<span class="keyword">FORWARD</span>, <span class="number">600</span>, <span class="keyword">MM</span>)
    drivetrain.<span class="function">turn_for</span>(<span class="keyword">RIGHT</span>, <span class="number">90</span>, <span class="keyword">DEGREES</span>)

    <span class="comment"># Side 3</span>
    drivetrain.<span class="function">drive_for</span>(<span class="keyword">FORWARD</span>, <span class="number">600</span>, <span class="keyword">MM</span>)
    drivetrain.<span class="function">turn_for</span>(<span class="keyword">RIGHT</span>, <span class="number">90</span>, <span class="keyword">DEGREES</span>)

    <span class="comment"># Side 4</span>
    drivetrain.<span class="function">drive_for</span>(<span class="keyword">FORWARD</span>, <span class="number">600</span>, <span class="keyword">MM</span>)
    drivetrain.<span class="function">turn_for</span>(<span class="keyword">RIGHT</span>, <span class="number">90</span>, <span class="keyword">DEGREES</span>)
                </div>

                <p>
                    <strong>What's the problem?</strong> We wrote the same two lines of code four times! This is repetitive, takes up lots of space, and is hard to modify. If you want to change the size of the square, you'd have to change the number 600 in four different places. There must be a better way...
                </p>
            </section>

            <section id="for-loops">
                <h2 class="section-title">
                    <i class="bi bi-arrow-repeat"></i> For Loops in Python
                </h2>

                <p>
                    A <strong>for loop</strong> is used to repeat a series of commands a specified number of times. Instead of writing the same code multiple times, you write it once inside a loop and tell Python how many times to repeat it.
                </p>

                <h3 class="subsection-title">Python For Loop Syntax</h3>

                <p>
                    In Python, a for loop has a specific structure. Understanding each part is crucial:
                </p>

                <div class="code-block">
<span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">4</span>):
    <span class="comment"># Commands to repeat go here (indented!)</span>
    drivetrain.<span class="function">drive_for</span>(<span class="keyword">FORWARD</span>, <span class="number">600</span>, <span class="keyword">MM</span>)
    drivetrain.<span class="function">turn_for</span>(<span class="keyword">RIGHT</span>, <span class="number">90</span>, <span class="keyword">DEGREES</span>)
                </div>

                <p>Let's break down each part of this syntax:</p>

                <ul>
                    <li><code><strong>for</strong></code> - Keyword that identifies this as a loop</li>
                    <li><code><strong>i</strong></code> - Variable that tracks which iteration we're on (you can name it anything, but 'i' is common)</li>
                    <li><code><strong>in</strong></code> - Keyword that connects the variable to the sequence</li>
                    <li><code><strong>range(4)</strong></code> - Function that creates a sequence from 0 to 3 (4 numbers total)</li>
                    <li><code><strong>:</strong></code> - Colon that ends the loop header (REQUIRED!)</li>
                    <li><strong>Indentation</strong> - The indented lines are what gets repeated</li>
                </ul>

                <div class="python-accent-box">
                    <i class="bi bi-info-circle"></i>
                    <strong>Python Syntax Note:</strong> The colon (<code>:</code>) at the end of the for loop line is required! Without it, Python will give you an error. Also, everything inside the loop MUST be indented by exactly 4 spaces (or 1 tab).
                </div>

                <h3 class="subsection-title">Drawing a Square With a Loop</h3>

                <p>Now let's rewrite our square-drawing code using a for loop:</p>

                <div class="code-block">
<span class="keyword">def</span> <span class="function">main</span>():
    <span class="comment"># Put the pen down</span>
    pen.<span class="function">move</span>(<span class="keyword">DOWN</span>)

    <span class="comment"># Repeat 4 times to draw all 4 sides</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">4</span>):
        drivetrain.<span class="function">drive_for</span>(<span class="keyword">FORWARD</span>, <span class="number">600</span>, <span class="keyword">MM</span>)
        drivetrain.<span class="function">turn_for</span>(<span class="keyword">RIGHT</span>, <span class="number">90</span>, <span class="keyword">DEGREES</span>)
        <span class="function">wait</span>(<span class="number">5</span>, <span class="keyword">MSEC</span>)  <span class="comment"># Required by VEXcode VR</span>
                </div>

                <p>
                    <strong>Much better!</strong> This code does exactly the same thing as the previous version, but it's shorter, cleaner, and easier to modify. If you want to change the size, you only need to change the number 600 in one place!
                </p>

                <div class="comparison-box">
                    <div class="comparison-side blocks-side">
                        <h4>Without Loop: 10 Lines</h4>
                        <div class="code-block" style="margin-top: 10px; font-size: 0.85rem;">
pen.move(DOWN)
drivetrain.drive_for(FORWARD, 600, MM)
drivetrain.turn_for(RIGHT, 90, DEGREES)
drivetrain.drive_for(FORWARD, 600, MM)
drivetrain.turn_for(RIGHT, 90, DEGREES)
drivetrain.drive_for(FORWARD, 600, MM)
drivetrain.turn_for(RIGHT, 90, DEGREES)
drivetrain.drive_for(FORWARD, 600, MM)
drivetrain.turn_for(RIGHT, 90, DEGREES)
                        </div>
                    </div>
                    <div class="comparison-side python-side">
                        <h4>With Loop: 5 Lines</h4>
                        <div class="code-block" style="margin-top: 10px; font-size: 0.85rem;">
pen.move(DOWN)
for i in range(4):
    drivetrain.drive_for(FORWARD, 600, MM)
    drivetrain.turn_for(RIGHT, 90, DEGREES)
    wait(5, MSEC)
                        </div>
                    </div>
                </div>

                <h3 class="subsection-title">Understanding the range() Function</h3>

                <p>
                    The <code>range()</code> function is what tells Python how many times to repeat the loop. It creates a sequence of numbers starting from 0.
                </p>

                <div class="info-box">
                    <strong>How range() Works:</strong>
                    <ul class="mb-0 mt-2">
                        <li><code>range(4)</code> creates the sequence: 0, 1, 2, 3 (4 numbers total)</li>
                        <li><code>range(6)</code> creates the sequence: 0, 1, 2, 3, 4, 5 (6 numbers total)</li>
                        <li><code>range(10)</code> creates the sequence: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 (10 numbers total)</li>
                        <li>The range function only accepts <strong>integers</strong> (whole numbers), not decimals</li>
                    </ul>
                </div>

                <div class="warning-box">
                    <i class="bi bi-exclamation-triangle"></i>
                    <strong>Important: Indentation in Python!</strong> Indentation isn't just for looks in Python - it's part of the syntax! The indented lines inside the for loop are the commands that will be repeated. If your indentation is wrong, Python will give you an error or your code won't work as expected. Use the gray guide lines in VEXcode VR to check your indentation.
                </div>
            </section>

            <section id="flow">
                <h2 class="section-title">
                    <i class="bi bi-diagram-3"></i> Flow of a For Loop
                </h2>

                <p>
                    Understanding how Python executes a for loop step-by-step will help you write better code. Let's walk through what happens when a for loop runs.
                </p>

                <h3 class="subsection-title">How Python Executes a For Loop</h3>

                <p>When Python encounters a for loop, it follows these steps:</p>

                <ol class="step-list">
                    <li>
                        <strong>Initialize:</strong> Python starts with the first value from range (usually 0) and assigns it to the loop variable (i)
                    </li>
                    <li>
                        <strong>Execute:</strong> Python runs all the indented commands inside the loop once
                    </li>
                    <li>
                        <strong>Iterate:</strong> Python moves to the next value in the range (1, then 2, then 3, etc.)
                    </li>
                    <li>
                        <strong>Repeat:</strong> Steps 2 and 3 repeat until all values in the range have been used
                    </li>
                    <li>
                        <strong>Exit:</strong> When the range is complete, Python exits the loop and continues with code after the loop
                    </li>
                </ol>

                <h3 class="subsection-title">Visualizing Loop Iterations</h3>

                <p>Let's see how the range parameter affects the robot's behavior when drawing a square:</p>

                <div class="practice-example">
                    <h4><code>range(0)</code> - Zero iterations</h4>
                    <p>The robot doesn't draw anything. The loop body never executes.</p>
                </div>

                <div class="practice-example">
                    <h4><code>range(1)</code> - One iteration</h4>
                    <p>The robot draws one side and turns once. Not enough to complete the square.</p>
                </div>

                <div class="practice-example">
                    <h4><code>range(2)</code> - Two iterations</h4>
                    <p>The robot draws two sides and makes two turns. Still not a complete square.</p>
                </div>

                <div class="practice-example">
                    <h4><code>range(3)</code> - Three iterations</h4>
                    <p>The robot draws three sides and makes three turns. Almost there!</p>
                </div>

                <div class="practice-example">
                    <h4><code>range(4)</code> - Four iterations (Perfect!)</h4>
                    <p>The robot draws all four sides and makes four turns, completing the square.</p>
                </div>

                <div class="practice-example">
                    <h4><code>range(5)</code> - Five iterations</h4>
                    <p>The robot completes the square and then traces over the first side again. The shape looks the same, but the robot's final position is different.</p>
                </div>

                <div class="tip-box">
                    <i class="bi bi-lightbulb"></i>
                    <strong>Key Insight:</strong> The range value determines how many times the loop repeats. For a square (4 sides), we need <code>range(4)</code>. For a triangle (3 sides), we'd use <code>range(3)</code>. For a hexagon (6 sides), we'd use <code>range(6)</code>!
                </div>

                <h3 class="subsection-title">Code After the Loop</h3>

                <p>
                    Commands that come after the loop (not indented) will only run once the loop has completed all its iterations:
                </p>

                <div class="code-block">
<span class="keyword">def</span> <span class="function">main</span>():
    pen.<span class="function">move</span>(<span class="keyword">DOWN</span>)

    <span class="comment"># This loop runs 4 times</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">4</span>):
        drivetrain.<span class="function">drive_for</span>(<span class="keyword">FORWARD</span>, <span class="number">600</span>, <span class="keyword">MM</span>)
        drivetrain.<span class="function">turn_for</span>(<span class="keyword">RIGHT</span>, <span class="number">90</span>, <span class="keyword">DEGREES</span>)
        <span class="function">wait</span>(<span class="number">5</span>, <span class="keyword">MSEC</span>)

    <span class="comment"># These commands run AFTER the loop completes (only once)</span>
    pen.<span class="function">set_pen_color</span>(<span class="keyword">RED</span>)
    drivetrain.<span class="function">drive_for</span>(<span class="keyword">REVERSE</span>, <span class="number">600</span>, <span class="keyword">MM</span>)
                </div>

                <p>
                    This code draws a black square (4 iterations), then changes the pen to red and draws a line backwards (runs once after the loop).
                </p>

                <div class="info-box">
                    <i class="bi bi-info-circle"></i>
                    <strong>VEXcode VR Note:</strong> You'll notice a <code>wait(5, MSEC)</code> command inside the loop. VEXcode VR automatically adds this to ensure the web-based platform runs correctly. Don't delete it, or your project may not work as intended!
                </div>
            </section>

            <section id="practice">
                <h2 class="section-title">
                    <i class="bi bi-pen"></i> Practice Examples
                </h2>

                <p>
                    Now that you understand for loops, let's practice with some examples. Try these in VEXcode VR on the Art Canvas Playground!
                </p>

                <div class="practice-example">
                    <h4>Example 1: Draw a Triangle</h4>
                    <p>A triangle has 3 sides and requires 120-degree turns (360 / 3 = 120):</p>
                    <div class="code-block">
<span class="keyword">def</span> <span class="function">main</span>():
    pen.<span class="function">move</span>(<span class="keyword">DOWN</span>)

    <span class="comment"># Repeat 3 times for a triangle</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">3</span>):
        drivetrain.<span class="function">drive_for</span>(<span class="keyword">FORWARD</span>, <span class="number">500</span>, <span class="keyword">MM</span>)
        drivetrain.<span class="function">turn_for</span>(<span class="keyword">RIGHT</span>, <span class="number">120</span>, <span class="keyword">DEGREES</span>)
        <span class="function">wait</span>(<span class="number">5</span>, <span class="keyword">MSEC</span>)
                    </div>
                </div>

                <div class="practice-example">
                    <h4>Example 2: Draw Two Squares of Different Sizes</h4>
                    <p>Draw a large square, lift the pen, move, then draw a smaller square:</p>
                    <div class="code-block">
<span class="keyword">def</span> <span class="function">main</span>():
    <span class="comment"># Draw large square (600mm sides)</span>
    pen.<span class="function">move</span>(<span class="keyword">DOWN</span>)
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">4</span>):
        drivetrain.<span class="function">drive_for</span>(<span class="keyword">FORWARD</span>, <span class="number">600</span>, <span class="keyword">MM</span>)
        drivetrain.<span class="function">turn_for</span>(<span class="keyword">RIGHT</span>, <span class="number">90</span>, <span class="keyword">DEGREES</span>)
        <span class="function">wait</span>(<span class="number">5</span>, <span class="keyword">MSEC</span>)

    <span class="comment"># Lift pen and move to new position</span>
    pen.<span class="function">move</span>(<span class="keyword">UP</span>)
    drivetrain.<span class="function">drive_for</span>(<span class="keyword">FORWARD</span>, <span class="number">200</span>, <span class="keyword">MM</span>)
    drivetrain.<span class="function">turn_for</span>(<span class="keyword">LEFT</span>, <span class="number">90</span>, <span class="keyword">DEGREES</span>)
    drivetrain.<span class="function">drive_for</span>(<span class="keyword">FORWARD</span>, <span class="number">200</span>, <span class="keyword">MM</span>)

    <span class="comment"># Draw small square (300mm sides)</span>
    pen.<span class="function">move</span>(<span class="keyword">DOWN</span>)
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">4</span>):
        drivetrain.<span class="function">drive_for</span>(<span class="keyword">FORWARD</span>, <span class="number">300</span>, <span class="keyword">MM</span>)
        drivetrain.<span class="function">turn_for</span>(<span class="keyword">LEFT</span>, <span class="number">90</span>, <span class="keyword">DEGREES</span>)
        <span class="function">wait</span>(<span class="number">5</span>, <span class="keyword">MSEC</span>)
                    </div>
                </div>

                <div class="practice-example">
                    <h4>Example 3: Draw a Colored Hexagon</h4>
                    <p>A hexagon has 6 sides and requires 60-degree turns (360 / 6 = 60):</p>
                    <div class="code-block">
<span class="keyword">def</span> <span class="function">main</span>():
    <span class="comment"># Set pen color to blue</span>
    pen.<span class="function">set_pen_color</span>(<span class="keyword">BLUE</span>)
    pen.<span class="function">move</span>(<span class="keyword">DOWN</span>)

    <span class="comment"># Repeat 6 times for a hexagon</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">6</span>):
        drivetrain.<span class="function">drive_for</span>(<span class="keyword">FORWARD</span>, <span class="number">400</span>, <span class="keyword">MM</span>)
        drivetrain.<span class="function">turn_for</span>(<span class="keyword">RIGHT</span>, <span class="number">60</span>, <span class="keyword">DEGREES</span>)
        <span class="function">wait</span>(<span class="number">5</span>, <span class="keyword">MSEC</span>)
                    </div>
                </div>

                <div class="tip-box">
                    <i class="bi bi-lightbulb"></i>
                    <strong>Try It Yourself:</strong> Open VEXcode VR, select the Art Canvas Playground, and try these examples. Experiment by changing the numbers - try different side lengths, different numbers of sides, and different colors!
                </div>

                <div class="button-group">
                    <a href="https://vr.vex.com" target="_blank" class="action-button">
                        <i class="bi bi-box-arrow-up-right"></i> Launch VEXcode VR
                    </a>
                </div>
            </section>

            <section id="challenge">
                <h2 class="section-title">
                    <i class="bi bi-trophy"></i> Draw a House Challenge
                </h2>

                <p>
                    Now it's time to put everything together! In this challenge, you'll combine the Pen tool with for loops to draw a house on the Art Canvas Playground.
                </p>

                <div class="learning-outcomes">
                    <h3>
                        <i class="bi bi-target"></i>
                        Challenge Goal
                    </h3>
                    <p>Create a project where the VR Robot draws a house using:</p>
                    <ul>
                        <li>A <strong>black square</strong> for the house body (using a for loop)</li>
                        <li>A <strong>blue triangle</strong> for the roof (two angled lines)</li>
                        <li>Proper use of <code>pen.move()</code> and <code>pen.set_pen_color()</code></li>
                    </ul>
                </div>

                <h3 class="subsection-title">Challenge Steps</h3>

                <ol class="step-list">
                    <li>
                        <strong>Create a new project:</strong> Open VEXcode VR, select "New Text Project", and choose the Art Canvas Playground. Name it "Unit3Challenge".
                    </li>
                    <li>
                        <strong>Draw the square base:</strong> Use a for loop to draw a black square with 600mm sides. Remember to put the pen down first!
                    </li>
                    <li>
                        <strong>Position for the roof:</strong> After completing the square, the robot should be at one of the top corners. You may need to adjust the robot's position.
                    </li>
                    <li>
                        <strong>Change pen color:</strong> Set the pen color to blue for the roof.
                    </li>
                    <li>
                        <strong>Draw the roof:</strong> Draw two angled lines to form a triangle roof. You'll need to experiment with the angles to get it right!
                    </li>
                    <li>
                        <strong>Test and refine:</strong> Run your project. If it doesn't look right, edit and try again until the house is complete.
                    </li>
                </ol>

                <div class="tip-box">
                    <i class="bi bi-lightbulb"></i>
                    <strong>Hints:</strong>
                    <ul class="mb-0">
                        <li>For the roof, try turning 45 degrees, driving forward, then turning 90 degrees and driving back</li>
                        <li>You might need to turn left before starting the roof to get the right angle</li>
                        <li>The roof lines can be shorter than the square sides (try 400mm or so)</li>
                        <li>Don't forget to use <code>wait(5, MSEC)</code> inside your loop!</li>
                    </ul>
                </div>

                <div class="info-box" style="text-align: center;">
                    <i class="bi bi-trophy"></i>
                    <strong>Success Criteria:</strong> Your house should have a complete black square for the body and two blue angled lines forming a triangle roof on top. The robot should start in the center and end after drawing the complete house.
                </div>
            </section>

            <section id="quiz">
                <h2 class="section-title">
                    <i class="bi bi-question-circle"></i> Check Your Knowledge
                </h2>

                <div class="quiz-section">
                    <div class="quiz-question">
                        <h4>1. What is the correct syntax for a for loop that repeats 5 times?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="q1" value="a"> <code>for 5 times:</code></label>
                            <label><input type="radio" name="q1" value="b"> <code>for i in range(5):</code></label>
                            <label><input type="radio" name="q1" value="c"> <code>repeat 5 times</code></label>
                            <label><input type="radio" name="q1" value="d"> <code>loop(5):</code></label>
                        </div>
                        <div class="quiz-feedback" id="feedback1"></div>
                    </div>

                    <div class="quiz-question">
                        <h4>2. Which command puts the pen down so the robot can draw?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="q2" value="a"> <code>pen.start()</code></label>
                            <label><input type="radio" name="q2" value="b"> <code>pen.move(DOWN)</code></label>
                            <label><input type="radio" name="q2" value="c"> <code>pen.draw()</code></label>
                            <label><input type="radio" name="q2" value="d"> <code>pen.on()</code></label>
                        </div>
                        <div class="quiz-feedback" id="feedback2"></div>
                    </div>

                    <div class="quiz-question">
                        <h4>3. Why is indentation important in Python for loops?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="q3" value="a"> It makes the code look organized</label>
                            <label><input type="radio" name="q3" value="b"> It defines which commands are inside the loop and will be repeated</label>
                            <label><input type="radio" name="q3" value="c"> It's optional and doesn't affect how the code runs</label>
                            <label><input type="radio" name="q3" value="d"> It only matters for comments</label>
                        </div>
                        <div class="quiz-feedback" id="feedback3"></div>
                    </div>

                    <div class="quiz-question">
                        <h4>4. What does <code>range(6)</code> create?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="q4" value="a"> The numbers 1, 2, 3, 4, 5, 6</label>
                            <label><input type="radio" name="q4" value="b"> The numbers 0, 1, 2, 3, 4, 5</label>
                            <label><input type="radio" name="q4" value="c"> The number 6</label>
                            <label><input type="radio" name="q4" value="d"> The numbers 1 through 5</label>
                        </div>
                        <div class="quiz-feedback" id="feedback4"></div>
                    </div>

                    <div class="quiz-question">
                        <h4>5. To draw a triangle (3 sides), what should the range parameter be?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="q5" value="a"> <code>range(2)</code></label>
                            <label><input type="radio" name="q5" value="b"> <code>range(3)</code></label>
                            <label><input type="radio" name="q5" value="c"> <code>range(4)</code></label>
                            <label><input type="radio" name="q5" value="d"> <code>range(90)</code></label>
                        </div>
                        <div class="quiz-feedback" id="feedback5"></div>
                    </div>

                    <div class="quiz-question">
                        <h4>6. What happens to commands that are NOT indented after a for loop?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="q6" value="a"> They run during every iteration of the loop</label>
                            <label><input type="radio" name="q6" value="b"> They never run</label>
                            <label><input type="radio" name="q6" value="c"> They run once after the loop completes</label>
                            <label><input type="radio" name="q6" value="d"> They cause an error</label>
                        </div>
                        <div class="quiz-feedback" id="feedback6"></div>
                    </div>

                    <button class="action-button" onclick="checkAnswers()">
                        <i class="bi bi-check-circle"></i> Check Answers
                    </button>
                </div>
            </section>

            <div class="info-box" style="text-align: center; margin-top: 30px;">
                <i class="bi bi-info-circle"></i>
                <strong>Note:</strong> Pass the quiz above with 100% to unlock the "Mark as Complete" button.
            </div>

            <div class="button-group">
                <button id="completeBtn" class="action-button" onclick="markComplete()" disabled>
                    <i class="bi bi-check-circle"></i>
                    Mark Lesson as Complete
                </button>
            </div>

            <div class="button-group">
                <a href="basic-movement.html" class="action-button secondary-button">
                    <i class="bi bi-arrow-left"></i> Previous Lesson
                </a>
                <a href="https://vr.vex.com" target="_blank" class="action-button">
                    <i class="bi bi-box-arrow-up-right"></i> Launch VEXcode VR
                </a>
                <a href="sensors-detection.html" class="action-button disabled" id="nextBtn" style="opacity: 0.5; cursor: not-allowed; pointer-events: none;">
                    <i class="bi bi-arrow-right"></i> Next Lesson
                </a>
            </div>
        </div>
    </div>

    <script>
        let quizPassed = false;

        // Quiz functionality
        function checkAnswers() {
            const answers = {
                q1: 'b',
                q2: 'b',
                q3: 'b',
                q4: 'b',
                q5: 'b',
                q6: 'c'
            };

            const feedback = {
                q1: {
                    correct: "Correct! The proper syntax is <code>for i in range(5):</code> - don't forget the colon at the end!",
                    incorrect: "Not quite. In Python, for loops use the syntax: <code>for variable in range(number):</code> with a colon at the end."
                },
                q2: {
                    correct: "Correct! <code>pen.move(DOWN)</code> puts the pen down so the robot can draw as it moves.",
                    incorrect: "Not quite. Use <code>pen.move(DOWN)</code> to lower the pen and <code>pen.move(UP)</code> to raise it."
                },
                q3: {
                    correct: "Correct! Indentation defines code blocks in Python - it tells Python which commands are inside the loop.",
                    incorrect: "Not quite. Indentation is critical in Python - it defines which commands are part of the loop and will be repeated."
                },
                q4: {
                    correct: "Correct! <code>range(6)</code> creates the sequence 0, 1, 2, 3, 4, 5 (starting at 0, ending before 6).",
                    incorrect: "Not quite. The range function starts at 0 and goes up to (but not including) the number you specify. So <code>range(6)</code> is 0, 1, 2, 3, 4, 5."
                },
                q5: {
                    correct: "Correct! A triangle has 3 sides, so you need <code>range(3)</code> to repeat the draw-and-turn commands 3 times.",
                    incorrect: "Not quite. Think about how many sides a triangle has - that's how many times you need to repeat the loop!"
                },
                q6: {
                    correct: "Correct! Commands that aren't indented are outside the loop, so they run once after all loop iterations complete.",
                    incorrect: "Not quite. Commands outside the loop (not indented) run once after the loop finishes all its iterations."
                }
            };

            let allCorrect = true;
            let answeredCount = 0;

            for (let q in answers) {
                const selected = document.querySelector(`input[name="${q}"]:checked`);
                const feedbackDiv = document.getElementById(`feedback${q.slice(1)}`);

                if (selected) {
                    answeredCount++;
                    if (selected.value === answers[q]) {
                        feedbackDiv.className = 'quiz-feedback correct';
                        feedbackDiv.innerHTML = `<i class="bi bi-check-circle"></i> ${feedback[q].correct}`;
                    } else {
                        feedbackDiv.className = 'quiz-feedback incorrect';
                        feedbackDiv.innerHTML = `<i class="bi bi-x-circle"></i> ${feedback[q].incorrect}`;
                        allCorrect = false;
                    }
                    feedbackDiv.style.display = 'block';
                } else {
                    allCorrect = false;
                }
            }

            if (answeredCount < 6) {
                alert('Please answer all questions before checking your answers.');
                return;
            }

            if (allCorrect) {
                quizPassed = true;
                // Enable the Next Lesson button
                const nextBtn = document.getElementById('nextBtn');
                nextBtn.classList.remove('disabled');
                nextBtn.style.opacity = '1';
                nextBtn.style.cursor = 'pointer';
                nextBtn.style.pointerEvents = 'auto';

                // Enable the complete button
                document.getElementById('completeBtn').disabled = false;

                // Show success message
                setTimeout(() => {
                    alert("Perfect score! You've mastered loops and patterns! You can now proceed to the next lesson.");
                }, 500);
            } else {
                quizPassed = false;
                const nextBtn = document.getElementById('nextBtn');
                nextBtn.classList.add('disabled');
                nextBtn.style.opacity = '0.5';
                nextBtn.style.cursor = 'not-allowed';
                nextBtn.style.pointerEvents = 'none';
                alert("Not quite there yet! Review the incorrect answers and try again.");
            }
        }

        // Smooth scroll to sections
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });

            // Update progress tracker
            document.querySelectorAll('.progress-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Update progress tracker on scroll
        window.addEventListener('scroll', () => {
            const sections = ['intro', 'pen-tool', 'drawing-square', 'for-loops', 'flow', 'practice', 'challenge', 'quiz'];
            const scrollPosition = window.scrollY + 200;

            sections.forEach(section => {
                const element = document.getElementById(section);
                if (element && element.offsetTop <= scrollPosition) {
                    document.querySelectorAll('.progress-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    const activeItem = document.querySelector(`.progress-item[onclick*="${section}"]`);
                    if (activeItem) {
                        activeItem.classList.add('active');
                    }
                }
            });
        });

        function markComplete() {
            // Check if quiz is passed
            if (!quizPassed) {
                alert('Please complete the quiz with 100% before marking as complete!');
                return;
            }

            let progress = JSON.parse(localStorage.getItem('vexPythonProgress') || '[]');
            const lessonId = 'loops-patterns';

            if (!progress.includes(lessonId)) {
                progress.push(lessonId);
                localStorage.setItem('vexPythonProgress', JSON.stringify(progress));
                alert('Lesson marked as complete! Great work!');
                // Redirect back to lessons page after a short delay
                setTimeout(() => {
                    window.location.href = './';
                }, 1500);
            } else {
                alert('You have already completed this lesson!');
            }
        }
    </script>
</body>
</html>
