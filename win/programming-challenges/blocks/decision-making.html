<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decision Making - W.I.N. Robotics</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../../../css/styles.css">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .main-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .lesson-card {
            background: white;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .breadcrumb-nav {
            background: rgba(255,255,255,0.1);
            padding: 10px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .breadcrumb-nav a {
            color: white;
            text-decoration: none;
            transition: opacity 0.3s;
        }

        .breadcrumb-nav a:hover {
            opacity: 0.8;
        }

        .section-title {
            color: #667eea;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .subsection-title {
            color: #333;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .info-box {
            background: #f0f7ff;
            border-left: 4px solid #2196f3;
            padding: 15px 20px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .warning-box {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 15px 20px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .tip-box {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px 20px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .code-block {
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }

        .decision-flowchart {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .conditional-blocks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .conditional-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid transparent;
            transition: border-color 0.3s, transform 0.3s;
        }

        .conditional-card:hover {
            border-color: #667eea;
            transform: translateY(-3px);
        }

        .conditional-card h4 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2rem;
            font-family: 'Courier New', monospace;
        }

        .conditional-card p {
            color: #666;
            font-size: 0.95rem;
            margin: 10px 0;
        }

        .flowchart-box {
            display: inline-block;
            padding: 10px 20px;
            margin: 10px;
            border-radius: 5px;
            font-weight: bold;
        }

        .condition-box {
            background: #fff3e0;
            border: 2px solid #ff9800;
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
            padding: 20px 40px;
        }

        .action-box {
            background: #e3f2fd;
            border: 2px solid #2196f3;
        }

        .challenge-box {
            background: linear-gradient(135deg, #f5f5f5, #e8e8e8);
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
        }

        .challenge-title {
            color: #667eea;
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .comparison-table {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
        }

        .comparison-table td {
            padding: 12px;
            border: 1px solid #ddd;
        }

        .comparison-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .logic-operators {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .operator-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #ddd;
            text-align: center;
        }

        .operator-card h5 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .operator-card code {
            background: #f5f5f5;
            padding: 5px 10px;
            border-radius: 4px;
            display: block;
            margin: 5px 0;
        }

        .quiz-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
        }

        .quiz-question {
            margin-bottom: 20px;
        }

        .quiz-options label {
            display: block;
            padding: 10px;
            margin: 5px 0;
            background: white;
            border: 2px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-options label:hover {
            border-color: #667eea;
            background: #f0f7ff;
        }

        .quiz-options input[type="radio"] {
            margin-right: 10px;
        }

        .quiz-feedback {
            padding: 10px;
            border-radius: 5px;
            margin-top: 15px;
            display: none;
        }

        .quiz-feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .quiz-feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .action-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: transform 0.2s, box-shadow 0.2s;
            border: none;
            font-size: 1rem;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            color: white;
        }

        .secondary-button {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .secondary-button:hover {
            background: #f0f7ff;
            color: #667eea;
        }

        .progress-tracker {
            position: fixed;
            right: 20px;
            top: 100px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            width: 200px;
            z-index: 100;
        }

        @media (max-width: 1200px) {
            .progress-tracker {
                display: none;
            }
        }

        .progress-item {
            padding: 5px 0;
            color: #999;
            font-size: 0.9rem;
            cursor: pointer;
            transition: color 0.3s;
        }

        .progress-item.active {
            color: #667eea;
            font-weight: bold;
        }

        .truth-table {
            margin: 20px auto;
            border-collapse: collapse;
        }

        .truth-table th, .truth-table td {
            padding: 10px 20px;
            border: 1px solid #ddd;
            text-align: center;
        }

        .truth-table th {
            background: #667eea;
            color: white;
        }

        .true-cell {
            background: #d4edda;
            color: #155724;
        }

        .false-cell {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <nav class="breadcrumb-nav">
            <a href="../../../">
                <i class="bi bi-house"></i> Home
            </a>
            <span class="text-white-50 mx-2">/</span>
            <a href="../../">W.I.N. Robotics</a>
            <span class="text-white-50 mx-2">/</span>
            <a href="../">Programming Challenges</a>
            <span class="text-white-50 mx-2">/</span>
            <a href="./">Block Coding</a>
            <span class="text-white-50 mx-2">/</span>
            <span class="text-white">Decision Making</span>
        </nav>

        <div class="progress-tracker">
            <h6 class="mb-3">On This Page</h6>
            <div class="progress-item active" onclick="scrollToSection('conditionals')">Conditional Blocks</div>
            <div class="progress-item" onclick="scrollToSection('ifthen')">If Then Logic</div>
            <div class="progress-item" onclick="scrollToSection('ifelse')">If Then Else</div>
            <div class="progress-item" onclick="scrollToSection('operators')">Logic Operators</div>
            <div class="progress-item" onclick="scrollToSection('nested')">Nested Conditions</div>
            <div class="progress-item" onclick="scrollToSection('challenge')">Color Sorter</div>
            <div class="progress-item" onclick="scrollToSection('quiz')">Check Your Knowledge</div>
        </div>

        <div class="lesson-card">
            <h1 class="display-4 mb-4">
                <i class="bi bi-signpost-split text-primary"></i>
                Decision Making
            </h1>
            <p class="lead">
                Teach your robot to think! Use conditional statements to make decisions based on sensor input. Your robot will choose different actions based on what it detects!
            </p>

            <div class="info-box">
                <i class="bi bi-info-circle"></i>
                <strong>Lesson Goal:</strong> Master if-then-else blocks to create a robot that makes intelligent decisions based on sensor data.
            </div>

            <section id="conditionals">
                <h2 class="section-title">
                    <i class="bi bi-diagram-3"></i> Understanding Conditionals
                </h2>

                <p>Conditional statements allow your robot to make decisions. They follow the pattern: <strong>"IF something is true, THEN do this"</strong></p>

                <div class="decision-flowchart">
                    <svg width="500" height="300" viewBox="0 0 500 300">
                        <!-- Start -->
                        <rect x="210" y="10" width="80" height="40" rx="5" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
                        <text x="250" y="35" text-anchor="middle" font-size="14">Start</text>
                        
                        <!-- Arrow down -->
                        <line x1="250" y1="50" x2="250" y2="80" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        
                        <!-- Decision diamond -->
                        <path d="M 250 80 L 320 130 L 250 180 L 180 130 Z" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>
                        <text x="250" y="125" text-anchor="middle" font-size="12">Sensor</text>
                        <text x="250" y="140" text-anchor="middle" font-size="12">detects</text>
                        <text x="250" y="155" text-anchor="middle" font-size="12">something?</text>
                        
                        <!-- TRUE branch -->
                        <line x1="180" y1="130" x2="120" y2="130" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        <text x="150" y="120" font-size="12" fill="#4caf50">TRUE</text>
                        <rect x="40" y="110" width="80" height="40" rx="5" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
                        <text x="80" y="135" text-anchor="middle" font-size="12">Action A</text>
                        
                        <!-- FALSE branch -->
                        <line x1="320" y1="130" x2="380" y2="130" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        <text x="350" y="120" font-size="12" fill="#e74c3c">FALSE</text>
                        <rect x="380" y="110" width="80" height="40" rx="5" fill="#fce4ec" stroke="#e91e63" stroke-width="2"/>
                        <text x="420" y="135" text-anchor="middle" font-size="12">Action B</text>
                        
                        <!-- Arrows to end -->
                        <line x1="80" y1="150" x2="80" y2="230" stroke="#666" stroke-width="2"/>
                        <line x1="420" y1="150" x2="420" y2="230" stroke="#666" stroke-width="2"/>
                        <line x1="80" y1="230" x2="420" y2="230" stroke="#666" stroke-width="2"/>
                        <line x1="250" y1="230" x2="250" y2="250" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        
                        <!-- End -->
                        <rect x="210" y="250" width="80" height="40" rx="5" fill="#ffebee" stroke="#f44336" stroke-width="2"/>
                        <text x="250" y="275" text-anchor="middle" font-size="14">Continue</text>
                        
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#666"/>
                            </marker>
                        </defs>
                    </svg>
                </div>

                <h3 class="subsection-title">Real-World Example</h3>
                <p>Think of a automatic door:</p>
                <ul>
                    <li><strong>IF</strong> motion sensor detects person → <strong>THEN</strong> open door</li>
                    <li><strong>ELSE</strong> (no person detected) → keep door closed</li>
                </ul>
            </section>

            <section id="ifthen">
                <h2 class="section-title">
                    <i class="bi bi-arrow-right-square"></i> If Then Blocks
                </h2>

                <p>The <strong>[if then]</strong> block runs code only when a condition is TRUE:</p>

                <div class="conditional-blocks-grid">
                    <div class="conditional-card">
                        <h4>[if then]</h4>
                        <p><strong>When to use:</strong> You want something to happen only under specific conditions</p>
                        <p><strong>Example:</strong> Stop when wall detected</p>
                    </div>
                </div>

                <h3 class="subsection-title">Example: Color Detection</h3>
                
                <div class="code-block">
                    when started<br>
                    repeat forever<br>
                    &nbsp;&nbsp;if &lt;Eye found "Red" with "Front" Eye&gt; then<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;stop driving<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;play sound "Tada"<br>
                    &nbsp;&nbsp;end<br>
                    &nbsp;&nbsp;drive forward
                </div>

                <div class="tip-box">
                    <i class="bi bi-lightbulb"></i>
                    <strong>Important:</strong> [if then] blocks only check the condition ONCE unless inside a loop!
                </div>

                <h3 class="subsection-title">Multiple Conditions</h3>
                <p>You can check multiple conditions in sequence:</p>
                
                <div class="code-block">
                    when started<br>
                    if &lt;Eye found "Green"&gt; then<br>
                    &nbsp;&nbsp;turn right for 90 degrees<br>
                    end<br>
                    if &lt;Eye found "Blue"&gt; then<br>
                    &nbsp;&nbsp;turn left for 90 degrees<br>
                    end<br>
                    if &lt;Eye found "Red"&gt; then<br>
                    &nbsp;&nbsp;stop driving<br>
                    end
                </div>
            </section>

            <section id="ifelse">
                <h2 class="section-title">
                    <i class="bi bi-arrow-left-right"></i> If Then Else Blocks
                </h2>

                <p>The <strong>[if then else]</strong> block provides two paths - one for TRUE, one for FALSE:</p>

                <div class="comparison-table">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>If Then</th>
                                <th>If Then Else</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Executes code only if TRUE</td>
                                <td>Always executes one branch</td>
                            </tr>
                            <tr>
                                <td>Nothing happens if FALSE</td>
                                <td>Has specific action for FALSE</td>
                            </tr>
                            <tr>
                                <td>Good for optional actions</td>
                                <td>Good for either/or decisions</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3 class="subsection-title">Example: Wall Avoidance</h3>
                
                <div class="code-block">
                    when started<br>
                    repeat forever<br>
                    &nbsp;&nbsp;if &lt;(Distance from "Front") &lt; 100&gt; then<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;// Wall detected - turn away<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;stop driving<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;turn right for 90 degrees<br>
                    &nbsp;&nbsp;else<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;// No wall - keep going<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;drive forward<br>
                    &nbsp;&nbsp;end
                </div>

                <div class="warning-box">
                    <i class="bi bi-exclamation-triangle"></i>
                    <strong>Remember:</strong> Only ONE branch executes - either the "then" part OR the "else" part, never both!
                </div>
            </section>

            <section id="operators">
                <h2 class="section-title">
                    <i class="bi bi-calculator"></i> Logic Operators
                </h2>

                <p>Combine multiple conditions to make complex decisions:</p>

                <div class="logic-operators">
                    <div class="operator-card">
                        <h5>AND</h5>
                        <code>&lt;A and B&gt;</code>
                        <p>Both must be TRUE</p>
                    </div>
                    <div class="operator-card">
                        <h5>OR</h5>
                        <code>&lt;A or B&gt;</code>
                        <p>At least one TRUE</p>
                    </div>
                    <div class="operator-card">
                        <h5>NOT</h5>
                        <code>&lt;not A&gt;</code>
                        <p>Opposite value</p>
                    </div>
                </div>

                <h3 class="subsection-title">Comparison Operators</h3>
                
                <div class="logic-operators">
                    <div class="operator-card">
                        <h5>Less Than</h5>
                        <code>&lt;A &lt; B&gt;</code>
                    </div>
                    <div class="operator-card">
                        <h5>Greater Than</h5>
                        <code>&lt;A &gt; B&gt;</code>
                    </div>
                    <div class="operator-card">
                        <h5>Equal To</h5>
                        <code>&lt;A = B&gt;</code>
                    </div>
                </div>

                <h3 class="subsection-title">Truth Table Example</h3>
                
                <table class="truth-table">
                    <thead>
                        <tr>
                            <th>Condition A</th>
                            <th>Condition B</th>
                            <th>A AND B</th>
                            <th>A OR B</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="true-cell">TRUE</td>
                            <td class="true-cell">TRUE</td>
                            <td class="true-cell">TRUE</td>
                            <td class="true-cell">TRUE</td>
                        </tr>
                        <tr>
                            <td class="true-cell">TRUE</td>
                            <td class="false-cell">FALSE</td>
                            <td class="false-cell">FALSE</td>
                            <td class="true-cell">TRUE</td>
                        </tr>
                        <tr>
                            <td class="false-cell">FALSE</td>
                            <td class="true-cell">TRUE</td>
                            <td class="false-cell">FALSE</td>
                            <td class="true-cell">TRUE</td>
                        </tr>
                        <tr>
                            <td class="false-cell">FALSE</td>
                            <td class="false-cell">FALSE</td>
                            <td class="false-cell">FALSE</td>
                            <td class="false-cell">FALSE</td>
                        </tr>
                    </tbody>
                </table>

                <h3 class="subsection-title">Complex Condition Example</h3>
                
                <div class="code-block">
                    when started<br>
                    // Stop if wall is close AND bumper is pressed<br>
                    if &lt;((Distance from) &lt; 50) and (Pressing bumper)&gt; then<br>
                    &nbsp;&nbsp;stop driving<br>
                    &nbsp;&nbsp;drive reverse for 100 mm<br>
                    end
                </div>
            </section>

            <section id="nested">
                <h2 class="section-title">
                    <i class="bi bi-stack"></i> Nested Conditions
                </h2>

                <p>Put conditional blocks inside other conditional blocks for more complex logic:</p>

                <div class="code-block">
                    when started<br>
                    if &lt;Distance found object&gt; then<br>
                    &nbsp;&nbsp;// Object detected, check what color<br>
                    &nbsp;&nbsp;if &lt;Eye found "Red"&gt; then<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;// Red object - stop<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;stop driving<br>
                    &nbsp;&nbsp;else<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;if &lt;Eye found "Green"&gt; then<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Green object - turn right<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;turn right for 90 degrees<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;else<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Other color - turn left<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;turn left for 90 degrees<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;end<br>
                    &nbsp;&nbsp;end<br>
                    else<br>
                    &nbsp;&nbsp;// No object - keep searching<br>
                    &nbsp;&nbsp;turn right for 10 degrees<br>
                    end
                </div>

                <div class="tip-box">
                    <i class="bi bi-lightbulb"></i>
                    <strong>Pro Tip:</strong> Draw a flowchart first when planning nested conditions - it helps visualize the logic!
                </div>
            </section>

            <section id="challenge">
                <h2 class="section-title">
                    <i class="bi bi-trophy"></i> Color Sorter Challenge
                </h2>

                <div class="challenge-box">
                    <h3 class="challenge-title">
                        <i class="bi bi-flag-fill" style="color: #e74c3c;"></i>
                        Your Mission: Sort Colored Disks!
                    </h3>
                    
                    <p>Program your robot to navigate the Disk Maze playground and make decisions based on disk colors:</p>
                    <ul>
                        <li><strong>Green disk:</strong> Turn RIGHT 90 degrees</li>
                        <li><strong>Blue disk:</strong> Turn LEFT 90 degrees</li>
                        <li><strong>Red disk:</strong> STOP (you've reached the end!)</li>
                        <li><strong>No color:</strong> Drive forward</li>
                    </ul>

                    <h4 style="color: #667eea; margin-top: 20px;">Algorithm Steps:</h4>
                    <ol>
                        <li>Check what color the front eye sensor sees</li>
                        <li>Make a decision based on the color</li>
                        <li>Execute the appropriate action</li>
                        <li>Repeat until red disk is found</li>
                    </ol>

                    <h4 style="color: #667eea; margin-top: 20px;">Starter Code:</h4>
                    <div class="code-block">
                        when started<br>
                        repeat forever<br>
                        &nbsp;&nbsp;// Check for green disk<br>
                        &nbsp;&nbsp;if &lt;Eye found "Green" with "Front" Eye&gt; then<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;turn right for 90 degrees<br>
                        &nbsp;&nbsp;else<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;// Check for blue disk<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;if &lt;Eye found "Blue" with "Front" Eye&gt; then<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;turn left for 90 degrees<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;else<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Add code for red and no color!<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Hint: Use another if-then-else<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;end<br>
                        &nbsp;&nbsp;end<br>
                        &nbsp;&nbsp;wait 0.1 seconds  // Small delay for sensor reading
                    </div>

                    <div class="button-group" style="justify-content: center;">
                        <a href="https://vr.vex.com" target="_blank" class="action-button">
                            <i class="bi bi-play-fill"></i> Open VEXcode VR
                        </a>
                    </div>

                    <details style="margin-top: 20px;">
                        <summary style="cursor: pointer; color: #667eea; font-weight: bold;">
                            <i class="bi bi-key"></i> Need hints?
                        </summary>
                        <div style="margin-top: 10px; padding: 15px; background: #f0f7ff; border-radius: 5px;">
                            <p><strong>Hint 1:</strong> Check for red BEFORE checking for "no color"</p>
                            <p><strong>Hint 2:</strong> Use "stop driving" and "stop project" for the red disk</p>
                            <p><strong>Hint 3:</strong> When no color is detected, drive forward slowly</p>
                            <p><strong>Hint 4:</strong> Add a small wait after each action to let the sensor update</p>
                        </div>
                    </details>

                    <details style="margin-top: 10px;">
                        <summary style="cursor: pointer; color: #27ae60; font-weight: bold;">
                            <i class="bi bi-star"></i> Advanced Challenge
                        </summary>
                        <div style="margin-top: 10px; padding: 15px; background: #e8f5e9; border-radius: 5px;">
                            <p><strong>Challenge 1:</strong> Count how many of each color you encounter</p>
                            <p><strong>Challenge 2:</strong> Play different sounds for each color</p>
                            <p><strong>Challenge 3:</strong> Draw the path with the pen as you go</p>
                            <p><strong>Challenge 4:</strong> Create a "smart" navigator that remembers the path</p>
                        </div>
                    </details>
                </div>
            </section>

            <section id="quiz">
                <h2 class="section-title">
                    <i class="bi bi-question-circle"></i> Check Your Knowledge
                </h2>

                <div class="quiz-section">
                    <div class="quiz-question">
                        <h4>1. What happens when an [if then] block's condition is FALSE?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="q1" value="a"> The program stops</label>
                            <label><input type="radio" name="q1" value="b"> The blocks inside are skipped</label>
                            <label><input type="radio" name="q1" value="c"> An error occurs</label>
                            <label><input type="radio" name="q1" value="d"> The condition is checked again</label>
                        </div>
                        <div class="quiz-feedback" id="feedback1"></div>
                    </div>

                    <div class="quiz-question">
                        <h4>2. In an [if then else] block, how many branches can execute?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="q2" value="a"> None</label>
                            <label><input type="radio" name="q2" value="b"> Only one</label>
                            <label><input type="radio" name="q2" value="c"> Both</label>
                            <label><input type="radio" name="q2" value="d"> It depends on the condition</label>
                        </div>
                        <div class="quiz-feedback" id="feedback2"></div>
                    </div>

                    <div class="quiz-question">
                        <h4>3. What does the AND operator require?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="q3" value="a"> At least one condition to be TRUE</label>
                            <label><input type="radio" name="q3" value="b"> All conditions to be TRUE</label>
                            <label><input type="radio" name="q3" value="c"> All conditions to be FALSE</label>
                            <label><input type="radio" name="q3" value="d"> Exactly one condition to be TRUE</label>
                        </div>
                        <div class="quiz-feedback" id="feedback3"></div>
                    </div>

                    <div class="quiz-question">
                        <h4>4. Why should [if then] blocks be inside loops for sensor checking?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="q4" value="a"> To make the code run faster</label>
                            <label><input type="radio" name="q4" value="b"> To check the condition repeatedly</label>
                            <label><input type="radio" name="q4" value="c"> To save battery power</label>
                            <label><input type="radio" name="q4" value="d"> To prevent errors</label>
                        </div>
                        <div class="quiz-feedback" id="feedback4"></div>
                    </div>

                    <div class="quiz-question">
                        <h4>5. What is the result of &lt;TRUE or FALSE&gt;?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="q5" value="a"> TRUE</label>
                            <label><input type="radio" name="q5" value="b"> FALSE</label>
                            <label><input type="radio" name="q5" value="c"> Error</label>
                            <label><input type="radio" name="q5" value="d"> Unknown</label>
                        </div>
                        <div class="quiz-feedback" id="feedback5"></div>
                    </div>

                    <button class="action-button" onclick="checkAnswers()">
                        <i class="bi bi-check-circle"></i> Check Answers
                    </button>
                </div>
            </section>

            <div class="info-box" style="text-align: center; margin-top: 30px;">
                <i class="bi bi-info-circle"></i>
                <strong>Note:</strong> Complete the Color Sorter Challenge and pass the quiz with 100% to unlock the "Mark as Complete" button.
            </div>

            <div class="button-group">
                <a href="./" class="action-button secondary-button">
                    <i class="bi bi-arrow-left"></i> Back to Lessons
                </a>
                <a href="https://vr.vex.com" target="_blank" class="action-button">
                    <i class="bi bi-box-arrow-up-right"></i> Launch VEXcode VR
                </a>
                <button class="action-button disabled" id="completeBtn" onclick="markComplete()" disabled style="opacity: 0.5; cursor: not-allowed;">
                    <i class="bi bi-check2-square"></i> Mark as Complete
                </button>
            </div>
        </div>
    </div>

    <script>
        let quizPassed = false;
        
        // Quiz functionality
        function checkAnswers() {
            const answers = {
                q1: 'b',  // Blocks inside are skipped
                q2: 'b',  // Only one branch executes
                q3: 'b',  // All conditions must be TRUE
                q4: 'b',  // To check condition repeatedly
                q5: 'a'   // TRUE or FALSE = TRUE
            };

            const feedback = {
                q1: {
                    correct: "Correct! When an [if then] condition is FALSE, the blocks inside are skipped.",
                    incorrect: "Not quite. When FALSE, the blocks inside [if then] are skipped and the program continues."
                },
                q2: {
                    correct: "Correct! Exactly one branch executes - either 'then' OR 'else', never both.",
                    incorrect: "Not quite. In [if then else], exactly one branch always executes."
                },
                q3: {
                    correct: "Correct! AND requires ALL conditions to be TRUE.",
                    incorrect: "Not quite. AND operator requires ALL conditions to be TRUE to return TRUE."
                },
                q4: {
                    correct: "Correct! Loops allow the condition to be checked repeatedly for continuous monitoring.",
                    incorrect: "Not quite. Without a loop, [if then] only checks once. Loops enable continuous checking."
                },
                q5: {
                    correct: "Correct! OR returns TRUE if at least one condition is TRUE.",
                    incorrect: "Not quite. TRUE or FALSE = TRUE (OR needs just one TRUE condition)."
                }
            };

            let allCorrect = true;
            let answeredCount = 0;

            for (let q in answers) {
                const selected = document.querySelector(`input[name="${q}"]:checked`);
                const feedbackDiv = document.getElementById(`feedback${q.slice(1)}`);
                
                if (selected) {
                    answeredCount++;
                    if (selected.value === answers[q]) {
                        feedbackDiv.className = 'quiz-feedback correct';
                        feedbackDiv.innerHTML = `<i class="bi bi-check-circle"></i> ${feedback[q].correct}`;
                    } else {
                        feedbackDiv.className = 'quiz-feedback incorrect';
                        feedbackDiv.innerHTML = `<i class="bi bi-x-circle"></i> ${feedback[q].incorrect}`;
                        allCorrect = false;
                    }
                    feedbackDiv.style.display = 'block';
                } else {
                    allCorrect = false;
                }
            }

            if (answeredCount < 5) {
                showModal('Please answer all questions before checking your answers.', 'Quiz Incomplete', 'warning');
                return;
            }

            if (allCorrect) {
                quizPassed = true;
                // Enable the Mark as Complete button
                const completeBtn = document.getElementById('completeBtn');
                completeBtn.disabled = false;
                completeBtn.classList.remove('disabled');
                completeBtn.style.opacity = '1';
                completeBtn.style.cursor = 'pointer';
                
                // Show success message
                setTimeout(() => {
                    showModal("Perfect score! You've mastered decision making! Complete the Color Sorter Challenge if you haven't already, then mark this lesson as complete.", 'Congratulations! 🎉', 'success');
                }, 500);
            } else {
                quizPassed = false;
                showModal("Not quite there yet! Review the incorrect answers and try again.", 'Keep Trying!', 'error');
            }
        }

        // Mark lesson as complete
        function markComplete() {
            if (!quizPassed) {
                showModal('Please complete the quiz with 100% before marking as complete!', 'Quiz Required', 'warning');
                document.getElementById('quiz').scrollIntoView({ behavior: 'smooth' });
                return;
            }
            
            // Check if they've acknowledged the challenge
            if (!confirm('Have you completed the Color Sorter Challenge? Click OK if yes, Cancel to go back and complete it.')) {
                document.getElementById('challenge').scrollIntoView({ behavior: 'smooth' });
                return;
            }
            
            let progress = JSON.parse(localStorage.getItem('vexBlocksProgress') || '[]');
            if (!progress.includes('decision-making')) {
                progress.push('decision-making');
                localStorage.setItem('vexBlocksProgress', JSON.stringify(progress));
                showModal('Lesson marked as complete! Great work!', 'Success! 🎉', 'success');
                // Redirect back to lessons page
                setTimeout(() => {
                    window.location.href = './';
                }, 1500);
            } else {
                showModal('You have already completed this lesson!', 'Already Completed', 'info');
            }
        }

        // Smooth scroll to sections
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
            
            // Update progress tracker
            document.querySelectorAll('.progress-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Update progress tracker on scroll
        window.addEventListener('scroll', () => {
            const sections = ['conditionals', 'ifthen', 'ifelse', 'operators', 'nested', 'challenge', 'quiz'];
            const scrollPosition = window.scrollY + 200;

            sections.forEach(section => {
                const element = document.getElementById(section);
                if (element && element.offsetTop <= scrollPosition) {
                    document.querySelectorAll('.progress-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    const activeItem = document.querySelector(`.progress-item[onclick*="${section}"]`);
                    if (activeItem) {
                        activeItem.classList.add('active');
                    }
                }
            });
        });
    </script>

    <!-- Reusable Modal -->
    <div class="modal fade" id="customModal" tabindex="-1" aria-labelledby="customModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header" id="modalHeader">
                    <h5 class="modal-title" id="customModalLabel">
                        <i class="bi bi-info-circle" id="modalIcon"></i>
                        <span id="modalTitle">Notice</span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modalBody">
                    Modal message goes here.
                </div>
                <div class="modal-footer" id="modalFooter">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="modalOkBtn">OK</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Custom modal functions to replace alert()
        function showModal(message, title = 'Notice', type = 'info') {
            const modal = new bootstrap.Modal(document.getElementById('customModal'));
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            const modalIcon = document.getElementById('modalIcon');
            const modalHeader = document.getElementById('modalHeader');
            const modalOkBtn = document.getElementById('modalOkBtn');

            // Set icon and color based on type
            if (type === 'success') {
                modalIcon.className = 'bi bi-check-circle-fill';
                modalHeader.style.borderBottom = '3px solid #4caf50';
                modalOkBtn.className = 'btn btn-success';
            } else if (type === 'error') {
                modalIcon.className = 'bi bi-x-circle-fill';
                modalHeader.style.borderBottom = '3px solid #f44336';
                modalOkBtn.className = 'btn btn-danger';
            } else if (type === 'warning') {
                modalIcon.className = 'bi bi-exclamation-triangle-fill';
                modalHeader.style.borderBottom = '3px solid #ff9800';
                modalOkBtn.className = 'btn btn-warning';
            } else {
                modalIcon.className = 'bi bi-info-circle-fill';
                modalHeader.style.borderBottom = '3px solid #2196f3';
                modalOkBtn.className = 'btn btn-primary';
            }

            modalTitle.textContent = title;
            modalBody.innerHTML = message;
            modal.show();
        }


</html>