<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gear Ratio Simulator - W.I.N. Robotics</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .simulator-panel, .info-panel {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .gear-canvas {
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px solid #dee2e6;
            margin: 20px 0;
            position: relative;
            height: 400px;
            overflow: hidden;
        }

        .gear {
            position: absolute;
            border-radius: 50%;
            transform-origin: center;
            transition: none;
        }

        .gear::before {
            content: '';
            position: absolute;
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .gear::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.8);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .gear.input {
            background: linear-gradient(135deg, #3498db, #2980b9);
            border: 3px solid #2c3e50;
        }

        .gear.output {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            border: 3px solid #2c3e50;
        }

        .gear.idler {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            border: 3px solid #2c3e50;
        }

        .controls {
            margin: 20px 0;
        }

        .control-group {
            margin: 15px 0;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #34495e;
            font-weight: 600;
        }

        select, input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            font-size: 16px;
        }

        button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin: 5px;
            transition: transform 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        .results {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #dee2e6;
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-label {
            color: #7f8c8d;
        }

        .result-value {
            font-weight: bold;
            color: #2c3e50;
        }

        .scenario-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 10px 0;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #2c3e50;
        }

        .quiz-section {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .quiz-question {
            margin: 15px 0;
        }

        .quiz-options {
            display: grid;
            gap: 10px;
            margin: 10px 0;
        }

        .quiz-option {
            background: white;
            border: 2px solid #dee2e6;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quiz-option:hover {
            background: #f8f9fa;
        }

        .quiz-option.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .quiz-option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .scenario-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>⚙️ Gear Ratio Simulator</h1>
            <p>Explore how gear trains work - just like your VEX GO exercises!</p>
        </div>

        <div class="main-content">
            <div class="simulator-panel">
                <h2>Build Your Gear Train</h2>
                
                <div class="controls">
                    <div class="control-group">
                        <label>Scenario:</label>
                        <select id="scenarioSelect">
                            <option value="custom">Custom Build</option>
                            <option value="simple">Simple Gear Train (like Train A)</option>
                            <option value="reduction">Speed Reduction (like Train B)</option>
                            <option value="idler">With Idler Gear</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label>Input Gear Teeth:</label>
                        <input type="number" id="inputTeeth" min="8" max="60" value="20">
                    </div>

                    <div class="control-group">
                        <label>Output Gear Teeth:</label>
                        <input type="number" id="outputTeeth" min="8" max="60" value="20">
                    </div>

                    <div class="control-group">
                        <label>Add Idler Gear:</label>
                        <select id="idlerOption">
                            <option value="none">No Idler</option>
                            <option value="small">Small Idler (12 teeth)</option>
                            <option value="medium">Medium Idler (20 teeth)</option>
                        </select>
                    </div>

                    <button onclick="updateGears()">Update Gear Train</button>
                    <button onclick="toggleAnimation()">Start/Stop Animation</button>
                </div>

                <div class="gear-canvas" id="gearCanvas">
                    <!-- Gears will be drawn here -->
                </div>

                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: linear-gradient(135deg, #3498db, #2980b9);"></div>
                        <span>Input Gear</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: linear-gradient(135deg, #e74c3c, #c0392b);"></div>
                        <span>Output Gear</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: linear-gradient(135deg, #2ecc71, #27ae60);"></div>
                        <span>Idler Gear</span>
                    </div>
                </div>
            </div>

            <div class="info-panel">
                <h2>Gear Train Analysis</h2>
                
                <div class="results">
                    <div class="result-item">
                        <span class="result-label">Gear Ratio:</span>
                        <span class="result-value" id="gearRatio">1:1</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Speed Change:</span>
                        <span class="result-value" id="speedChange">No change</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Direction:</span>
                        <span class="result-value" id="direction">Same direction</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Mechanical Advantage:</span>
                        <span class="result-value" id="mechAdvantage">1.0</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">If Input Speed = 100 RPM:</span>
                        <span class="result-value" id="outputSpeed">100 RPM</span>
                    </div>
                </div>

                <h3>Quick Scenarios</h3>
                <div class="scenario-buttons">
                    <button onclick="loadScenario('simple')">Simple (1:1)</button>
                    <button onclick="loadScenario('speedUp')">Speed Up (1:2)</button>
                    <button onclick="loadScenario('slowDown')">Slow Down (2:1)</button>
                    <button onclick="loadScenario('highReduction')">High Reduction (3:1)</button>
                </div>

                <div class="quiz-section">
                    <h3>🎯 Quick Challenge</h3>
                    <div id="quizContent">
                        <p>Build a gear train and answer the questions - just like in class!</p>
                        <button onclick="startQuiz()">Start Challenge</button>
                    </div>
                </div>

                <div style="background: #e7f3ff; border-radius: 10px; padding: 15px; margin-top: 20px;">
                    <h4>💡 Remember:</h4>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>Gear Ratio = Output Teeth ÷ Input Teeth</li>
                        <li>Larger output gear = Slower speed, more torque</li>
                        <li>Smaller output gear = Faster speed, less torque</li>
                        <li>Idler gears change direction but not ratio</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        let animationId = null;
        let rotation = 0;
        let currentQuiz = null;

        function updateGears() {
            const canvas = document.getElementById('gearCanvas');
            const inputTeeth = parseInt(document.getElementById('inputTeeth').value);
            const outputTeeth = parseInt(document.getElementById('outputTeeth').value);
            const idlerOption = document.getElementById('idlerOption').value;
            
            // Clear existing gears
            canvas.innerHTML = '';
            
            // Calculate sizes (scale based on teeth count)
            const inputSize = 40 + inputTeeth * 2;
            const outputSize = 40 + outputTeeth * 2;
            
            // Create input gear
            const inputGear = document.createElement('div');
            inputGear.className = 'gear input';
            inputGear.style.width = inputSize + 'px';
            inputGear.style.height = inputSize + 'px';
            inputGear.style.left = '150px';
            inputGear.style.top = '50%';
            inputGear.style.transform = 'translateY(-50%)';
            inputGear.id = 'inputGear';
            canvas.appendChild(inputGear);
            
            // Position for output gear
            let outputLeft = 150 + inputSize/2 + outputSize/2 + 10;
            
            // Add idler if selected
            if (idlerOption !== 'none') {
                const idlerTeeth = idlerOption === 'small' ? 12 : 20;
                const idlerSize = 40 + idlerTeeth * 2;
                
                const idlerGear = document.createElement('div');
                idlerGear.className = 'gear idler';
                idlerGear.style.width = idlerSize + 'px';
                idlerGear.style.height = idlerSize + 'px';
                idlerGear.style.left = (150 + inputSize/2 + idlerSize/2 + 10) + 'px';
                idlerGear.style.top = '50%';
                idlerGear.style.transform = 'translateY(-50%)';
                idlerGear.id = 'idlerGear';
                canvas.appendChild(idlerGear);
                
                outputLeft = 150 + inputSize/2 + idlerSize + outputSize/2 + 20;
            }
            
            // Create output gear
            const outputGear = document.createElement('div');
            outputGear.className = 'gear output';
            outputGear.style.width = outputSize + 'px';
            outputGear.style.height = outputSize + 'px';
            outputGear.style.left = outputLeft + 'px';
            outputGear.style.top = '50%';
            outputGear.style.transform = 'translateY(-50%)';
            outputGear.id = 'outputGear';
            canvas.appendChild(outputGear);
            
            // Update calculations
            updateCalculations();
        }

        function updateCalculations() {
            const inputTeeth = parseInt(document.getElementById('inputTeeth').value);
            const outputTeeth = parseInt(document.getElementById('outputTeeth').value);
            const idlerOption = document.getElementById('idlerOption').value;
            
            // Calculate gear ratio
            const ratio = outputTeeth / inputTeeth;
            const simplified = simplifyRatio(outputTeeth, inputTeeth);
            
            document.getElementById('gearRatio').textContent = `${simplified[0]}:${simplified[1]}`;
            
            // Speed change
            if (ratio > 1) {
                document.getElementById('speedChange').textContent = `Decreased by ${ratio.toFixed(2)}x`;
            } else if (ratio < 1) {
                document.getElementById('speedChange').textContent = `Increased by ${(1/ratio).toFixed(2)}x`;
            } else {
                document.getElementById('speedChange').textContent = 'No change';
            }
            
            // Direction
            const hasIdler = idlerOption !== 'none';
            document.getElementById('direction').textContent = hasIdler ? 'Same direction' : 'Opposite direction';
            
            // Mechanical advantage
            document.getElementById('mechAdvantage').textContent = ratio.toFixed(2);
            
            // Output speed
            const outputSpeed = 100 / ratio;
            document.getElementById('outputSpeed').textContent = `${outputSpeed.toFixed(1)} RPM`;
        }

        function simplifyRatio(a, b) {
            const gcd = (x, y) => y === 0 ? x : gcd(y, x % y);
            const divisor = gcd(a, b);
            return [a / divisor, b / divisor];
        }

        function toggleAnimation() {
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
            } else {
                animate();
            }
        }

        function animate() {
            rotation += 2;
            
            const inputGear = document.getElementById('inputGear');
            const outputGear = document.getElementById('outputGear');
            const idlerGear = document.getElementById('idlerGear');
            
            if (inputGear) {
                inputGear.style.transform = `translateY(-50%) rotate(${rotation}deg)`;
            }
            
            if (outputGear) {
                const inputTeeth = parseInt(document.getElementById('inputTeeth').value);
                const outputTeeth = parseInt(document.getElementById('outputTeeth').value);
                const ratio = inputTeeth / outputTeeth;
                const hasIdler = document.getElementById('idlerOption').value !== 'none';
                const direction = hasIdler ? 1 : -1;
                outputGear.style.transform = `translateY(-50%) rotate(${rotation * ratio * direction}deg)`;
            }
            
            if (idlerGear) {
                idlerGear.style.transform = `translateY(-50%) rotate(${-rotation}deg)`;
            }
            
            animationId = requestAnimationFrame(animate);
        }

        function loadScenario(type) {
            switch(type) {
                case 'simple':
                    document.getElementById('inputTeeth').value = 20;
                    document.getElementById('outputTeeth').value = 20;
                    document.getElementById('idlerOption').value = 'none';
                    document.getElementById('scenarioSelect').value = 'simple';
                    break;
                case 'speedUp':
                    document.getElementById('inputTeeth').value = 40;
                    document.getElementById('outputTeeth').value = 20;
                    document.getElementById('idlerOption').value = 'none';
                    break;
                case 'slowDown':
                    document.getElementById('inputTeeth').value = 20;
                    document.getElementById('outputTeeth').value = 40;
                    document.getElementById('idlerOption').value = 'none';
                    break;
                case 'highReduction':
                    document.getElementById('inputTeeth').value = 20;
                    document.getElementById('outputTeeth').value = 60;
                    document.getElementById('idlerOption').value = 'none';
                    break;
                case 'reduction':
                    document.getElementById('inputTeeth').value = 12;
                    document.getElementById('outputTeeth').value = 36;
                    document.getElementById('idlerOption').value = 'none';
                    document.getElementById('scenarioSelect').value = 'reduction';
                    break;
                case 'idler':
                    document.getElementById('inputTeeth').value = 20;
                    document.getElementById('outputTeeth').value = 20;
                    document.getElementById('idlerOption').value = 'medium';
                    document.getElementById('scenarioSelect').value = 'idler';
                    break;
            }
            updateGears();
        }

        document.getElementById('scenarioSelect').addEventListener('change', function() {
            if (this.value !== 'custom') {
                loadScenario(this.value);
            }
        });

        const quizQuestions = [
            {
                question: "If the input gear has 20 teeth and the output gear has 40 teeth, what is the gear ratio?",
                options: ["1:2", "2:1", "1:1", "4:1"],
                correct: 1
            },
            {
                question: "What happens to the speed when the output gear is larger than the input gear?",
                options: ["Speed increases", "Speed decreases", "Speed stays the same", "Direction changes"],
                correct: 1
            },
            {
                question: "What does an idler gear change?",
                options: ["The gear ratio", "The speed", "The direction of rotation", "The torque"],
                correct: 2
            },
            {
                question: "If you want to increase speed, what size should the output gear be?",
                options: ["Larger than input", "Smaller than input", "Same as input", "Size doesn't matter"],
                correct: 1
            }
        ];

        function startQuiz() {
            const randomQ = quizQuestions[Math.floor(Math.random() * quizQuestions.length)];
            currentQuiz = randomQ;
            
            let html = `
                <div class="quiz-question">
                    <p><strong>${randomQ.question}</strong></p>
                    <div class="quiz-options">
            `;
            
            randomQ.options.forEach((option, index) => {
                html += `<div class="quiz-option" onclick="checkAnswer(${index})">${option}</div>`;
            });
            
            html += `
                    </div>
                    <button onclick="startQuiz()" style="margin-top: 10px;">Next Question</button>
                </div>
            `;
            
            document.getElementById('quizContent').innerHTML = html;
        }

        function checkAnswer(index) {
            const options = document.querySelectorAll('.quiz-option');
            options.forEach((opt, i) => {
                if (i === currentQuiz.correct) {
                    opt.classList.add('correct');
                } else if (i === index && i !== currentQuiz.correct) {
                    opt.classList.add('incorrect');
                }
                opt.style.pointerEvents = 'none';
            });
        }

        // Initialize
        updateGears();
    </script>
</body>
</html>
